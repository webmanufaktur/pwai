#!/bin/bash
# Project-local maintainer script
# Run with: ./maintainer [command] [args...]

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Set up paths
export FEATURES_DIR="$SCRIPT_DIR/.windsurf/features"
export TASKS_DIR="$SCRIPT_DIR/.windsurf/tasks"
export TEMPLATES_DIR="$SCRIPT_DIR/.windsurf/features/templates"

# Source completion script if being completed
if [[ "$1" == "--complete" ]]; then
    source "$SCRIPT_DIR/.windsurf/scripts/maintainer-completion.bash"
    _maintainer "$2" "$3" "$4"
    printf '%s\n' "${COMPREPLY[@]}"
    exit 0
fi

# Import the maintainer functions
source "$SCRIPT_DIR/.windsurf/scripts/maintainer-core.sh"

# Run the main function with all arguments
main "$@"
